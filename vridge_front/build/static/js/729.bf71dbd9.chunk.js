"use strict";(self.webpackChunkvridge=self.webpackChunkvridge||[]).push([[729],{4729:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});t(655),t(6766),t(3057);var n=t(7778),a=t(9989),i=t(5616),l=t(3571),c=(t(3698),t(7821)),r=t(1472),d=t(9950),o=t(8429),h=t(2569),x=t(9980),m=t(7844),p=t(9051),j=t.n(p),f=(t(82),t(9888)),u=t(1183),g=t(4414);function w(){const e=(0,o.Zp)(),{project_list:s,user:t}=(0,h.d4)(e=>e.ProjectStore),[p,j]=(0,d.useState)(null),{project_id:f}=(0,o.g)(),w=["\uc6d4","\uc8fc","\uc77c"],[N,b]=(0,d.useState)("\uc6d4"),[_,y]=(0,d.useState)("month"),[k,D]=(0,d.useState)(!1),[S,C]=(0,d.useState)(!1),A=(0,d.useMemo)(()=>!!p&&(t===p.owner_email||p.member_list.filter((e,s)=>e.email===t&&"manager"===e.rating).length>0),[p,t]);function M(){(0,u.I3)(f).then(e=>{j(e.data.result),console.log(e.data.result)}).catch(s=>{s.response&&s.response.data&&(window.alert(s.response.data.message),e("/CmsHome"))})}const Y=(e,s,t,n)=>{const a={type:s,start_date:t,end_date:n};(0,u.U7)(a,e).then(()=>{M()}).catch(e=>{console.error("Failed to update phase:",e),window.alert("\ud504\ub85c\uc81d\ud2b8 \ub2e8\uacc4 \uc5c5\ub370\uc774\ud2b8\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")})};(0,d.useEffect)(()=>{console.log("????"),M()},[f]);const[E,L]=(0,d.useState)((new Date).getDate()-1),[P,R]=(0,d.useState)((new Date).getMonth()),[F,W]=(0,d.useState)((new Date).getFullYear()),[z,I]=(0,d.useState)(0),[U,B]=(0,d.useState)([]);(0,d.useEffect)(()=>{(0,x.dy)()||e("/Login",{replace:!0})},[]);const H=e=>{let s=new Date(F,P,0).getDate(),t=new Date(F,P,0).getDay();console.log("\uc774\uc804\ub0a0\uc9dc",s,t);const n=new Date(F,P+1,0).getDay(),a=new Date(F,P+1,0).getDate();console.log("\ub2e4\uc74c\ub0a0\uc9dc",a,n);let i=[];if(6!==t){let e=P-1,n=F;e<0&&(--n,e=11);for(let a=0;a<t+1;a++)i.unshift(new Date(n,e,s-a))}let l=[],c=P+1,r=F;c>11&&(++r,c=0);for(let h=1;h<7-n;h++){if(0===h)return l;l.push(new Date(r,c,h))}let d,o=[];for(let h=1;h<a+1;h++)o.push(new Date(F,P,h));if("\uc77c"===e)return d=o,B(d),d;{d=i.concat(o,l);const e=[];for(let s=0;s<d.length;s+=7){const t=d.slice(s,s+7);e.push(t)}return B(e),e}};return(0,d.useEffect)(()=>{H(N)},[]),(0,g.jsx)(n.A,{children:(0,g.jsxs)("div",{className:"cms_wrap",children:[(0,g.jsx)(a.A,{}),(0,g.jsx)("main",{className:"project",children:p&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(v,{current_project:p}),(0,g.jsxs)("div",{className:"content calendar",children:[(0,g.jsx)("div",{style:{marginBottom:"20px"},children:(0,g.jsxs)("div",{className:"title",style:{display:"flex",alignItems:"center",gap:"10px"},children:["\uac1c\ubcc4 \uc77c\uc815\ud45c",(0,g.jsx)("button",{className:"collapse-btn ".concat(k?"collapsed":""),onClick:()=>D(!k),style:{width:"24px",height:"24px",borderRadius:"50%",background:"#012fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease"},children:(0,g.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"white",children:(0,g.jsx)("path",{d:k?"M4 2 L8 6 L4 10":"M2 4 L6 8 L10 4",stroke:"white",strokeWidth:"2",fill:"none"})})}),(0,g.jsxs)("div",{style:{marginLeft:"20px",display:"flex",gap:"6px"},children:[(0,g.jsx)("button",{className:"view-btn ".concat("month"===_?"active":""),onClick:()=>y("month"),style:{padding:"5px 15px",border:"1px solid #012fff",background:"month"===_?"#012fff":"white",color:"month"===_?"white":"#012fff",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.3s ease",whiteSpace:"nowrap"},children:"\uc6d4\uac04\ubcf4\uae30"}),(0,g.jsx)("button",{className:"view-btn ".concat("timeline"===_?"active":""),onClick:()=>y("timeline"),style:{padding:"5px 15px",border:"1px solid #012fff",background:"timeline"===_?"#012fff":"white",color:"timeline"===_?"white":"#012fff",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.3s ease",whiteSpace:"nowrap"},children:"\ud0c0\uc784\ub77c\uc778"}),(0,g.jsx)("button",{className:"view-btn ".concat("gantt"===_?"active":""),onClick:()=>y("gantt"),style:{padding:"5px 15px",border:"1px solid #012fff",background:"gantt"===_?"#012fff":"white",color:"gantt"===_?"white":"#012fff",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"500",transition:"all 0.3s ease",whiteSpace:"nowrap"},children:"\uac04\ud2b8\ucc28\ud2b8"})]})]})}),!k&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"filter flex space_between align_center",children:[(0,g.jsx)(i.A,{totalDate:U,year:F,month:P,setMonth:R,setYear:W,week_index:z,set_week_index:I,type:N,changeDate:H,day:E,setDay:L}),(0,g.jsxs)("div",{className:"type flex align_center",children:[(0,g.jsx)(m.A,{defaultValue:N,style:{width:140},value:N,onChange:e=>{const s=w.indexOf(e);H(w[s]),b(w[s])},options:w.map(e=>({label:e,value:e}))}),A&&(0,g.jsx)("button",{onClick:()=>e("/ProjectEdit/".concat(p.id)),className:"submit",children:"\ud504\ub85c\uc81d\ud2b8 \uad00\ub9ac"})]})]}),U&&"month"===_&&(0,g.jsx)(l.A,{totalDate:U,month:P,year:F,week_index:z,type:N,day:E,current_project:p,is_admin:A,refetch:M}),"month"!==_&&(0,g.jsx)(c.A,{projects:[p],viewMode:_,selectedPhase:"all",onPhaseUpdate:Y,isAdmin:A}),(0,g.jsx)("div",{className:"list_mark",children:(0,g.jsxs)("ul",{children:[(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"first"}),"\uae30\ucd08\uae30\ud68d\uc548 \uc791\uc131"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"second"}),"\uc2a4\ud1a0\ub9ac\ubcf4\ub4dc \uc791\uc131"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"third"}),"\ucd2c\uc601 (\uacc4\ud68d/\uc9c4\ud589)"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"fourth"}),"\ube44\ub514\uc624 \ud3b8\uc9d1"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"fifth"}),"\ud6c4\ubc18 \uc791\uc5c5"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"sixth"}),"\ube44\ub514\uc624 \uc2dc\uc0ac (\ud53c\ub4dc\ubc31)"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"seven"}),"\ucd5c\uc885 \ucee8\ud38c"]}),(0,g.jsxs)("li",{children:[(0,g.jsx)("span",{className:"eighth"}),"\uc601\uc0c1 \ub0a9\ud488"]})]})})]})]}),(0,g.jsxs)("div",{className:"content",style:{marginTop:"30px"},children:[(0,g.jsx)("div",{className:"title",children:"\ud504\ub85c\uc81d\ud2b8 \uc9c4\ud589 \ud604\ud669"}),(0,g.jsx)(r.A,{projects:[p],isAdmin:A,onPhaseUpdate:Y})]})]})})]})})}const v=d.memo(function(e){let{current_project:s}=e;const[t,n]=(0,d.useState)(!1),a=(0,d.useRef)(),[i,l]=(0,d.useState)(0);(0,d.useEffect)(()=>{a.current&&l(a.current.scrollHeight)},[a.current,t]);const c={height:t?"".concat(i,"px"):"0"};function r(e){return e.split("/").pop().split("\\").pop()}return(0,g.jsxs)("div",{className:"info_wrap",children:[(0,g.jsxs)("div",{className:"name_box flex align_center space_between",children:[(0,g.jsxs)("div",{className:" flex align_center start",children:[(0,g.jsx)("button",{className:t?"on":"",onClick:()=>{n(!t)},children:"\ubc84\ud2bc"}),(0,g.jsx)("div",{className:"s_title",children:s.name})]}),(0,g.jsxs)("div",{children:["\ucd5c\uc885 \uc5c5\ub370\uc774\ud2b8 \ub0a0\uc9dc |"," ",j()(s.updated).format("YYYY.MM.DD")]})]}),(0,g.jsx)("div",{className:"box",style:c,children:(0,g.jsxs)("div",{ref:a,className:"inner",children:[(0,g.jsxs)("div",{className:"explanation",children:[(0,g.jsx)("div",{className:"ss_title",children:(0,g.jsx)("span",{children:"\ud504\ub85c\uc81d\ud2b8 \uc124\uba85"})}),(0,g.jsx)("p",{children:s.description})]}),(0,g.jsxs)("div",{className:"member",children:[(0,g.jsx)("div",{className:"ss_title",children:(0,g.jsx)("span",{children:"\uba64\ubc84"})}),(0,g.jsxs)("ul",{children:[(0,g.jsxs)("li",{className:"admin",children:[(0,g.jsx)("div",{className:"img"}),(0,g.jsxs)("div",{className:"txt",children:[s.owner_nickname,"(\uad00\ub9ac\uc790)",(0,g.jsx)("span",{children:s.owner_email})]})]}),s.member_list.map((e,s)=>(0,g.jsxs)("li",{className:"manager"===e.rating?"admin":"basic",children:[(0,g.jsx)("div",{className:"img"}),(0,g.jsxs)("div",{className:"txt",children:[e.nickname,"(","manager"===e.rating?"\uad00\ub9ac\uc790":"\uc77c\ubc18",")",(0,g.jsx)("span",{children:e.email})]})]},s))]})]}),(0,g.jsxs)("div",{className:"info",children:[(0,g.jsx)("div",{className:"ss_title",children:(0,g.jsx)("span",{children:"\ud504\ub85c\uc81d\ud2b8 \uc815\ubcf4"})}),(0,g.jsxs)("dl",{children:[(0,g.jsx)("dt",{children:"\uc791\uc5c5\uc790"}),(0,g.jsx)("dd",{children:s.manager})]}),(0,g.jsxs)("dl",{children:[(0,g.jsx)("dt",{children:"\uace0\uac1d\uc0ac"}),(0,g.jsx)("dd",{children:s.consumer})]}),(0,g.jsxs)("dl",{children:[(0,g.jsxs)("dt",{children:["\ud504\ub85c\uc81d\ud2b8",(0,g.jsx)("br",{}),"\uc0dd\uc131\uc77c"]}),(0,g.jsx)("dd",{children:j()(s.created).format("YYYY.MM.DD")})]}),(0,g.jsxs)("dl",{children:[(0,g.jsx)("dt",{children:"\ub4f1\ub85d \ud30c\uc77c"}),(0,g.jsx)("dd",{children:s.files.map((e,s)=>(0,g.jsxs)("div",{onClick:()=>function(e){if(e){const s=document.createElement("a");s.href=e,s.download=r(e),s.target="_blank",s.click()}}(e.files),children:[r(e.file_name),(0,g.jsx)("i",{children:(0,g.jsx)("img",{src:f.A})})]},s))})]})]})]})})]})})},9888:(e,s,t)=>{t.d(s,{A:()=>n});t(9950);const n=t.p+"static/media/down_icon.2b55d5de8925064e33a5130f409190a9.svg"}}]);
# 🔧 AWS EC2 + RDS 상세 설정 가이드

## 🖥️ **1단계: EC2 인스턴스 생성 (상세)**

### AWS Console 접속 및 준비
1. **AWS Console 로그인**: https://console.aws.amazon.com
2. **우상단 리전**: **아시아 태평양(서울) ap-northeast-2** 확인
3. **검색창에 "EC2" 입력** → **EC2 서비스 클릭**
4. **왼쪽 메뉴에서 "인스턴스" 클릭**
5. **주황색 "인스턴스 시작" 버튼 클릭**

---

### 1-1. 이름 및 태그
```
이름: videoplanet-server
```
- **"이름 및 태그" 섹션**에서 입력
- 추가 태그는 생략 가능

---

### 1-2. 애플리케이션 및 OS 이미지 (Amazon Machine Image)
```
선택: Ubuntu Server 22.04 LTS (HVM), SSD Volume Type
아키텍처: 64비트 (x86)
```
- **"빠른 시작" 탭**에서 **Ubuntu** 클릭
- **버전**: Ubuntu Server 22.04 LTS 선택
- **아키텍처**: 64비트 (x86) 확인

---

### 1-3. 인스턴스 유형
```
인스턴스 유형: t3.medium
vCPU: 2
메모리: 4 GiB
```
- 드롭다운에서 **t3.medium** 선택
- **"프리 티어 사용 가능"** 표시 무시 (성능 우선)

---

### 1-4. 키 페어 (로그인)
```
새 키 페어 생성:
키 페어 이름: videoplanet-key
키 페어 유형: RSA
프라이빗 키 파일 형식: .pem
```
- **"새 키 페어 생성" 클릭**
- **키 페어 이름**: `videoplanet-key` 입력
- **RSA** 및 **.pem** 확인
- **"키 페어 생성" 클릭**
- **⚠️ 다운로드된 .pem 파일을 안전한 곳에 보관**

---

### 1-5. 네트워크 설정 ⭐ **중요**
```
VPC: 기본값 유지 (default)
서브넷: 기본값 유지 (자동 할당)
퍼블릭 IP 자동 할당: 활성화 ✅
```

#### 방화벽(보안 그룹) 생성:
**"보안 그룹 생성" 선택**
```
보안 그룹 이름: videoplanet-sg
설명: Security group for VideoplaNet server
```

#### 인바운드 보안 그룹 규칙:
**각 규칙을 "보안 그룹 규칙 추가" 버튼으로 추가:**

**규칙 1:**
- 유형: SSH
- 프로토콜: TCP
- 포트범위: 22
- 소스유형: 내 IP
- 원본: (자동으로 현재 IP 입력됨)
- 설명: SSH access

**규칙 2:**
- 유형: HTTP
- 프로토콜: TCP  
- 포트범위: 80
- 소스유형: 어디서나
- 원본: 0.0.0.0/0
- 설명: Web traffic

**규칙 3:**
- 유형: HTTPS
- 프로토콜: TCP
- 포트범위: 443
- 소스유형: 어디서나
- 원본: 0.0.0.0/0
- 설명: Secure web traffic

**규칙 4:**
- 유형: 사용자 지정 TCP
- 프로토콜: TCP
- 포트범위: 8000
- 소스유형: 어디서나
- 원본: 0.0.0.0/0
- 설명: Django development server

**규칙 5:**
- 유형: MYSQL/Aurora
- 프로토콜: TCP
- 포트범위: 3306
- 소스유형: 사용자 지정
- 원본: sg-xxxxxxxxx (현재 생성중인 보안그룹 ID - 나중에 수정 가능)
- 설명: MySQL from EC2

---

### 1-6. 스토리지 구성
```
볼륨 1(루트):
크기: 20 GiB
볼륨 유형: gp3
IOPS: 3000
처리량: 125
암호화됨: ✅ 체크
```
- **크기**: 20으로 변경
- **볼륨 유형**: gp3 선택
- **"고급" 클릭** → **"암호화됨" 체크**

---

### 1-7. 고급 세부 정보 (선택사항)
```
대부분 기본값 유지
종료 방식: 중지 (기본값)
세부 모니터링: 비활성화 (비용 절약)
```

---

### 1-8. 인스턴스 시작
1. **우측 "요약" 섹션 확인**
2. **"인스턴스 시작" 클릭**
3. **✅ "인스턴스를 성공적으로 시작했습니다" 메시지 확인**
4. **"모든 인스턴스 보기" 클릭**

---

## 💾 **2단계: RDS MySQL 데이터베이스 생성 (상세)**

### RDS Console 접속
1. **AWS 콘솔에서 검색창에 "RDS" 입력**
2. **RDS 서비스 클릭**
3. **왼쪽 메뉴에서 "데이터베이스" 클릭**
4. **주황색 "데이터베이스 생성" 버튼 클릭**

---

### 2-1. 데이터베이스 생성 방법
```
선택: 표준 생성
```

---

### 2-2. 엔진 옵션 ⭐ **중요**
```
엔진 유형: MySQL
에디션: MySQL Community
버전: MySQL 8.0.39 (최신 8.0.x)
```
- **⚠️ Microsoft SQL Server 선택하지 말 것**

---

### 2-3. 템플릿
```
선택: 개발/테스트 (또는 프로덕션)
```
- **프리 티어**: 제한적이지만 무료
- **개발/테스트**: 성능 좋음, 적당한 비용

---

### 2-4. 설정
```
DB 인스턴스 식별자: videoplanet-db
마스터 사용자 이름: admin
마스터 암호: [강력한 비밀번호 입력]
암호 확인: [동일한 비밀번호 재입력]
```
- **⚠️ 마스터 암호를 기록해 두세요**

---

### 2-5. 인스턴스 구성
```
DB 인스턴스 클래스: db.t3.micro (또는 db.t3.small)
스토리지 유형: 범용 SSD (gp2)
할당된 스토리지: 20 GiB
```

---

### 2-6. 연결 ⭐ **중요**
```
Virtual Private Cloud (VPC): 기본값 (EC2와 동일한 VPC)
서브넷 그룹: 기본값
퍼블릭 액세스: 아니오 (보안상 권장)
VPC 보안 그룹: 기존 항목 선택
기존 VPC 보안 그룹: videoplanet-sg (EC2에서 생성한 것)
```

---

### 2-7. 데이터베이스 인증
```
데이터베이스 인증 옵션: 암호 인증
```

---

### 2-8. 추가 구성
```
초기 데이터베이스 이름: videoplanet
포트: 3306 (기본값)
백업: 활성화 (7일 보관)
모니터링: 기본값
```

---

### 2-9. 데이터베이스 생성
1. **월별 예상 요금 확인**
2. **"데이터베이스 생성" 클릭**
3. **⏱️ 생성 완료까지 5-10분 대기**

---

## 🌐 **3단계: 도메인 연결 (Route 53)**

### Route 53 설정
1. **AWS 콘솔에서 "Route 53" 검색**
2. **호스팅 영역 → "호스팅 영역 생성"**
3. **도메인 이름**: `vlanet.net`
4. **유형**: 퍼블릭 호스팅 영역
5. **"호스팅 영역 생성" 클릭**

### DNS 레코드 추가
```
A 레코드:
이름: @
값: [EC2 퍼블릭 IP]

A 레코드:
이름: www
값: [EC2 퍼블릭 IP]
```

---

## 📋 **4단계: 정보 수집**

### EC2 정보 확인
1. **EC2 콘솔** → **인스턴스**
2. **videoplanet-server 선택**
3. **기록할 정보**:
   ```
   퍼블릭 IPv4 주소: x.x.x.x
   퍼블릭 IPv4 DNS: ec2-x-x-x-x.ap-northeast-2.compute.amazonaws.com
   인스턴스 ID: i-xxxxxxxxx
   ```

### RDS 정보 확인
1. **RDS 콘솔** → **데이터베이스**
2. **videoplanet-db 클릭**
3. **"연결 및 보안" 탭에서 기록**:
   ```
   엔드포인트: videoplanet-db.xxxxxxxxx.ap-northeast-2.rds.amazonaws.com
   포트: 3306
   ```

---

## 🎯 **다음 단계 준비사항**

### GitHub Secrets에 추가할 정보:
```
EC2_HOST: [EC2 퍼블릭 IP]
EC2_USER: ubuntu
EC2_KEY: [다운로드받은 .pem 파일 내용]
DB_HOST: [RDS 엔드포인트]
DB_NAME: videoplanet
DB_USER: admin
DB_PASSWORD: [설정한 마스터 암호]
```

---

## ⚠️ **주의사항**

1. **.pem 키 파일 보안**: 
   - 권한: `chmod 400 videoplanet-key.pem`
   - 안전한 위치에 보관

2. **비용 모니터링**:
   - AWS Billing Dashboard 정기 확인
   - CloudWatch 알람 설정 권장

3. **보안**:
   - SSH 키 분실 시 인스턴스 접근 불가
   - RDS 마스터 암호 분실 시 복구 어려움

---

## 🆘 **문제 해결**

### 일반적인 오류:
- **인스턴스 시작 실패**: 리전 확인, 키 페어 재생성
- **RDS 연결 실패**: 보안 그룹 규칙 확인
- **SQL Server 오류**: MySQL 엔진 선택 확인

### 지원:
- **AWS 지원 센터**: 계정 및 청구 문의
- **AWS 문서**: https://docs.aws.amazon.com/ko/
"use strict";(self.webpackChunkvridge=self.webpackChunkvridge||[]).push([[875],{6875:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var n=a(9379),t=(a(655),a(7778)),l=a(9989),i=a(9950),r=a(1183),c=a(4414);function d(e){let{project_id:s,set_current_project:a,pending_list:n}=e;const[t,l]=(0,i.useState)([""]),d=(e,s)=>{const a=[...t];a[e]=s,l(a)};return(0,c.jsxs)(c.Fragment,{children:[n.map((e,n)=>(0,c.jsxs)("div",{className:"pr mt10",children:[(0,c.jsx)("input",{type:"text",value:e.email,className:"ty01",placeholder:"\uc774\uba54\uc77c \uc785\ub825",readOnly:!0}),(0,c.jsx)("button",{className:"pend",children:"\ucd08\ub300\ub428"}),(0,c.jsx)("button",{className:"del",onClick:()=>{return n=e.id,void(window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,r.yr)({pk:n},s).then(e=>{(0,r.I3)(s).then(e=>{a(e.data.result)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)}));var n},children:"\uc0ad\uc81c"})]},n)),t.map((e,n)=>(0,c.jsxs)("div",{className:"pr mt10",children:[(0,c.jsx)("input",{type:"text",value:e,onChange:e=>d(n,e.target.value),className:"ty01",placeholder:"\uc774\uba54\uc77c \uc785\ub825"}),(0,c.jsx)("button",{onClick:()=>{d(n,""),(0,r.tY)({email:e},s).then(e=>{(0,r.I3)(s).then(e=>{a(e.data.result)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})},className:"cert",children:"\ubcf4\ub0b4\uae30"}),(0,c.jsx)("button",{className:"del",onClick:()=>(e=>{const s=[...t];s.splice(e,1),l(s)})(n),children:"\uc0ad\uc81c"})]},n)),(0,c.jsx)("button",{className:"add",onClick:()=>{l([...t,""])},children:"\uba64\ubc84 \ucd94\uac00"})]})}var o=a(6549),p=a(7533),m=a(7255),h=a(51),u=a(8429),j=a(2569),x=a(9980);function g(){const e=(0,u.Zp)(),s=(0,j.wA)(),{project_id:a}=(0,u.g)(),{project_list:g,sample_files:f}=(0,j.d4)(e=>e.ProjectStore),[N,w]=(0,i.useState)(null),{inputs:v,onChange:_,set_inputs:b}=(0,p.A)((0,x.d)(),e=>e.length<50),{name:C,description:k,manager:y,consumer:A}=v,[S,O]=(0,i.useState)((0,x._O)()),{files:E,FileChange:F,FileDelete:D}=(0,m.A)([]);S.filter((e,s)=>null==e.startDate||null==e.endDate);(0,i.useEffect)(()=>{(0,x.dy)()||e("/Login",{replace:!0})},[]),(0,i.useEffect)(()=>{(0,r.I3)(a).then(e=>{w(e.data.result),b((0,x.d)(e.data.result)),O((0,x._O)(e.data.result))}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})},[]);const I=!!(C&&k&&y&&A);function J(e){return e.split("/").pop().split("\\").pop()}function H(e){if(e){const s=document.createElement("a");s.href=e,s.download=J(e),s.target="_self",s.click()}}return(0,c.jsx)(t.A,{children:(0,c.jsxs)("div",{className:"cms_wrap",children:[(0,c.jsx)(l.A,{}),N&&(0,c.jsxs)("main",{className:"project edit",children:[(0,c.jsx)("div",{className:"title",children:"\ud504\ub85c\uc81d\ud2b8 \ub4f1\ub85d"}),(0,c.jsxs)("div",{className:"content",children:[(0,c.jsx)("div",{className:"group grid",children:(0,c.jsx)(o.A,{inputs:v,onChange:_})}),(0,c.jsxs)("div",{className:"group grid mt50",children:[(0,c.jsxs)("div",{className:"part",children:[(0,c.jsx)("div",{className:"s_title",children:"\uba64\ubc84 \ucd08\ub300"}),(0,c.jsx)(d,{project_id:a,set_current_project:w,pending_list:N.pending_list})]}),(0,c.jsxs)("div",{className:"part authority",children:[(0,c.jsx)("div",{className:"s_title",children:"\uba64\ubc84 \uad00\ub9ac"}),(0,c.jsx)("ul",{children:N.member_list.map((e,s)=>(0,c.jsxs)("li",{className:"flex align_center space_between",children:[e.email,(0,c.jsxs)("select",{onChange:s=>function(e,s){let a=(0,n.A)({},N);a.member_list.forEach((a,n)=>{a.id==s&&(a.rating=e.target.value)}),w(a)}(s,e.id),name:"rating",value:e.rating,children:[(0,c.jsx)("option",{value:"manager",children:"\uad00\ub9ac\uc790"}),(0,c.jsx)("option",{value:"normal",children:"\uc77c\ubc18"})]})]},e.id))})]})]}),(0,c.jsx)("div",{className:"group mt50",children:(0,c.jsxs)("div",{className:"part day",children:[(0,c.jsx)("div",{className:"s_title",children:"\ud504\ub85c\uc81d\ud2b8 \uc77c\uc815"}),(0,c.jsx)(h.A,{process:S,set_process:O})]})}),(0,c.jsxs)("div",{className:"group grid mt50",children:[(0,c.jsxs)("div",{className:"part file",children:[(0,c.jsx)("div",{className:"s_title",children:"\ubb38\uc11c \uc591\uc2dd"}),(0,c.jsx)("ul",{className:"sample",children:(0,c.jsx)("li",{children:f.map((e,s)=>(0,c.jsx)("span",{onClick:()=>H(e.files),children:J(e.file_name)},s))})})]}),(0,c.jsxs)("div",{className:"part file",children:[(0,c.jsx)("div",{className:"s_title",children:"\ud30c\uc77c \ub4f1\ub85d"}),(0,c.jsxs)("ul",{className:"sample",children:[N.files.map((e,s)=>(0,c.jsxs)("li",{onClick:()=>H(e.files),children:[J(e.file_name),(0,c.jsx)("button",{onClick:s=>{s.stopPropagation(),window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,r.gN)(e.id).then(e=>{(0,r.I3)(a).then(e=>{w(e.data.result)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})},children:"\uc0ad\uc81c"})]},s)),E.map((e,s)=>(0,c.jsxs)("li",{children:[e.name,(0,c.jsx)("button",{onClick:()=>D(s),children:"\uc0ad\uc81c"})]},s)),(0,c.jsxs)("li",{className:"upload_button",children:[(0,c.jsx)("label",{htmlFor:"file",children:(0,c.jsx)("div",{className:"btn-upload",children:"\ud30c\uc77c \uc5c5\ub85c\ub4dc"})}),(0,c.jsx)("input",{type:"file",name:"file",id:"file",onChange:F})]})]})]})]}),(0,c.jsxs)("div",{className:"btn_wrap",children:[(0,c.jsx)("button",{onClick:function(){if(I){const n=new FormData;n.append("inputs",JSON.stringify(v)),n.append("process",JSON.stringify(S)),E.forEach((e,s)=>{n.append("files",e)}),n.append("members",JSON.stringify(N.member_list)),(0,r.tz)(n,a).then(a=>{(0,x.XH)(s,e),window.alert("\uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc"),e("/Calendar")}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}else window.alert("\uc785\ub825\ub780\uc744 \ucc44\uc6cc\uc8fc\uc138\uc694.")},className:"submit",children:"\ub4f1\ub85d"}),(0,c.jsx)("button",{onClick:function(){window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(0,r.rV)(a).then(a=>{(0,x.XH)(s,e),e("/Calendar")}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})},className:"submit del",children:"\uc0ad\uc81c"})]})]})]})]})})}}}]);
"use strict";(self.webpackChunkvridge=self.webpackChunkvridge||[]).push([[638],{9638:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});n(655),n(6766),n(3057);var a=n(7778),s=n(9989),l=n(3571),r=n(5616),o=n(9950),i=n(4414);function c(e){let{project_list:t,this_month_project:n,next_month_project:a}=e;return(0,i.jsx)("div",{className:"part mt100",children:(0,i.jsxs)("ul",{className:"schedule",children:[(0,i.jsxs)("li",{children:["\uc804\uccb4 ",(0,i.jsx)("br",{}),"\ud504\ub85c\uc81d\ud2b8 ",(0,i.jsx)("span",{children:t.length})]}),(0,i.jsxs)("li",{children:["\uc774\ubc88 \ub2ec ",(0,i.jsx)("br",{}),"\ud504\ub85c\uc81d\ud2b8 ",(0,i.jsx)("span",{children:n.length})]}),(0,i.jsxs)("li",{children:["\ub2e4\uc74c \ub2ec ",(0,i.jsx)("br",{}),"\ud504\ub85c\uc81d\ud2b8 ",(0,i.jsx)("span",{children:a.length})]})]})})}var d=n(3698),p=n(7821),u=n(1472),h=n(8429),m=n(2569),x=n(7844),g=n(8738),f=n.n(g),j=n(604);function y(e){return["small","middle","large"].includes(e)}function v(e){return!!e&&("number"===typeof e&&!Number.isNaN(e))}var b=n(5741),w=n(3457);const _=o.createContext({latestIndex:0}),k=_.Provider,N=e=>{let{className:t,index:n,children:a,split:s,style:l}=e;const{latestIndex:r}=o.useContext(_);return null===a||void 0===a?null:o.createElement(o.Fragment,null,o.createElement("div",{className:t,style:l},a),n<r&&s&&o.createElement("span",{className:"".concat(t,"-split")},s))};var C=n(4655),S=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(n[a[s]]=e[a[s]])}return n};const D=o.forwardRef((e,t)=>{var n;const{getPrefixCls:a,direction:s,size:l,className:r,style:i,classNames:c,styles:d}=(0,b.TP)("space"),{size:p=(null!==l&&void 0!==l?l:"small"),align:u,className:h,rootClassName:m,children:x,direction:g="horizontal",prefixCls:w,split:_,style:D,wrap:A=!1,classNames:M,styles:E}=e,O=S(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[z,L]=Array.isArray(p)?p:[p,p],P=y(L),I=y(z),R=v(L),F=v(z),W=(0,j.A)(x,{keepEmpty:!0}),B=void 0===u&&"horizontal"===g?"center":u,H=a("space",w),[T,U,V]=(0,C.A)(H),G=f()(H,r,U,"".concat(H,"-").concat(g),{["".concat(H,"-rtl")]:"rtl"===s,["".concat(H,"-align-").concat(B)]:B,["".concat(H,"-gap-row-").concat(L)]:P,["".concat(H,"-gap-col-").concat(z)]:I},h,m,V),Y=f()("".concat(H,"-item"),null!==(n=null===M||void 0===M?void 0:M.item)&&void 0!==n?n:c.item);let X=0;const Z=W.map((e,t)=>{var n;null!==e&&void 0!==e&&(X=t);const a=(null===e||void 0===e?void 0:e.key)||"".concat(Y,"-").concat(t);return o.createElement(N,{className:Y,key:a,index:t,split:_,style:null!==(n=null===E||void 0===E?void 0:E.item)&&void 0!==n?n:d.item},e)}),q=o.useMemo(()=>({latestIndex:X}),[X]);if(0===W.length)return null;const J={};return A&&(J.flexWrap="wrap"),!I&&F&&(J.columnGap=z),!P&&R&&(J.rowGap=L),T(o.createElement("div",Object.assign({ref:t,className:G,style:Object.assign(Object.assign(Object.assign({},J),i),D)},O),o.createElement(k,{value:q},Z)))});D.Compact=w.Ay;const A=D;n(9051),n(82);var M=n(9980),E=n(1183);function O(){const e=(0,h.Zp)(),t=(0,m.wA)(),{project_list:n,this_month_project:g,next_month_project:f,user_memos:j,user:y}=(0,m.d4)(e=>e.ProjectStore),[v,b]=(0,o.useState)(n),{Option:w}=x.A,_=["\uc6d4","\uc8fc","\uc77c"],[k,N]=(0,o.useState)("\uc6d4"),C=e=>{if("\uc804\uccb4"===e)b(Q);else{const t=Q.filter(t=>t.name===e);b(t)}};function S(){(0,M.XH)(t,e)}const[D,O]=(0,o.useState)((new Date).getDate()-1),[z,L]=(0,o.useState)((new Date).getMonth()),[P,I]=(0,o.useState)((new Date).getFullYear()),[R,F]=(0,o.useState)(0),[W,B]=(0,o.useState)([]),[H,T]=(0,o.useState)(!1),[U,V]=(0,o.useState)("month"),[G,Y]=(0,o.useState)("all"),[X,Z]=(0,o.useState)(""),[q,J]=(0,o.useState)(!1),K=(e,t,n,a)=>{const s={type:t,start_date:n,end_date:a};(0,E.U7)(s,e).then(()=>{S()}).catch(e=>{console.error("Failed to update phase:",e)})},Q=(0,o.useMemo)(()=>n.filter(e=>new Date(e.end_date).getMonth()==z||new Date(e.first_date).getMonth()==z),[z,n]);(0,o.useEffect)(()=>{(0,M.dy)()||e("/Login",{replace:!0})},[]),(0,o.useEffect)(()=>{C("\uc804\uccb4")},[Q]);const $=e=>{let t=new Date(P,z,0).getDate(),n=new Date(P,z,0).getDay();console.log("\uc774\uc804\ub0a0\uc9dc",t,n);const a=new Date(P,z+1,0).getDay(),s=new Date(P,z+1,0).getDate();console.log("\ub2e4\uc74c\ub0a0\uc9dc",s,a);let l=[];if(6!==n){let e=z-1,a=P;e<0&&(--a,e=11);for(let s=0;s<n+1;s++)l.unshift(new Date(a,e,t-s))}let r=[],o=z+1,i=P;o>11&&(++i,o=0);for(let p=1;p<7-a;p++){if(0===p)return r;r.push(new Date(i,o,p))}let c,d=[];for(let p=1;p<s+1;p++)d.push(new Date(P,z,p));if("\uc77c"===e)return c=d,B(c),c;{c=l.concat(d,r);const e=[];for(let t=0;t<c.length;t+=7){const n=c.slice(t,t+7);e.push(n)}return B(e),e}};return(0,o.useEffect)(()=>{$(k)},[]),(0,i.jsx)(a.A,{children:(0,i.jsxs)("div",{className:"cms_wrap",children:[(0,i.jsx)(s.A,{}),(0,i.jsxs)("main",{children:[(0,i.jsxs)("div",{className:"title",style:{display:"flex",alignItems:"center",gap:"10px"},children:["\uce98\ub9b0\ub354",(0,i.jsx)("button",{className:"collapse-btn ".concat(q?"collapsed":""),onClick:()=>J(!q),style:{width:"24px",height:"24px",borderRadius:"50%",background:"#012fff",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.background="#0047b8"},onMouseLeave:e=>{e.currentTarget.style.background="#012fff"},children:(0,i.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"white",style:{transform:q?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s ease"},children:(0,i.jsx)("path",{d:"M5 7L1 3h8L5 7z"})})})]}),(0,i.jsx)("div",{className:"calendar-toolbar",style:{marginBottom:"20px",display:q?"none":"flex"},children:(0,i.jsxs)("ul",{className:"tab_list",style:{display:"flex",gap:"8px",listStyle:"none",padding:0,margin:0,alignItems:"center"},children:[(0,i.jsx)("li",{className:"month"===U?"active":"",children:(0,i.jsx)("button",{onClick:()=>V("month"),style:{padding:"8px 16px",fontSize:"14px",background:"month"===U?"#012fff":"transparent",color:"month"===U?"white":"#333",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"month"===U?"600":"400",transition:"all 0.3s ease",minHeight:"36px"},onMouseEnter:e=>{"month"!==U&&(e.target.style.background="rgba(1, 47, 255, 0.1)")},onMouseLeave:e=>{"month"!==U&&(e.target.style.background="transparent")},children:"\uc6d4\uac04 \ubcf4\uae30"})}),(0,i.jsx)("li",{className:"timeline"===U?"active":"",children:(0,i.jsx)("button",{onClick:()=>V("timeline"),style:{padding:"8px 16px",fontSize:"14px",background:"timeline"===U?"#012fff":"transparent",color:"timeline"===U?"white":"#333",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"timeline"===U?"600":"400",transition:"all 0.3s ease",minHeight:"36px"},onMouseEnter:e=>{"timeline"!==U&&(e.target.style.background="rgba(1, 47, 255, 0.1)")},onMouseLeave:e=>{"timeline"!==U&&(e.target.style.background="transparent")},children:"\ud0c0\uc784\ub77c\uc778"})}),(0,i.jsx)("li",{className:"gantt"===U?"active":"",children:(0,i.jsx)("button",{onClick:()=>V("gantt"),style:{padding:"8px 16px",fontSize:"14px",background:"gantt"===U?"#012fff":"transparent",color:"gantt"===U?"white":"#333",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"gantt"===U?"600":"400",transition:"all 0.3s ease",minHeight:"36px"},onMouseEnter:e=>{"gantt"!==U&&(e.target.style.background="rgba(1, 47, 255, 0.1)")},onMouseLeave:e=>{"gantt"!==U&&(e.target.style.background="transparent")},children:"\uac04\ud2b8 \ucc28\ud2b8"})}),(0,i.jsx)("div",{style:{borderLeft:"1px solid #e0e0e0",height:"16px",margin:"0 12px"}}),(0,i.jsxs)("li",{style:{marginLeft:"auto",display:"flex",gap:"8px",alignItems:"center"},children:[(0,i.jsx)("input",{type:"text",placeholder:"\ud504\ub85c\uc81d\ud2b8 \uac80\uc0c9...",value:X,onChange:e=>Z(e.target.value),style:{padding:"6px 12px",fontSize:"13px",border:"1px solid #e0e0e0",borderRadius:"6px",width:"150px",outline:"none"},onFocus:e=>{e.target.style.borderColor="#0058da"},onBlur:e=>{e.target.style.borderColor="#e0e0e0"}}),(0,i.jsxs)("select",{value:G,onChange:e=>Y(e.target.value),style:{padding:"6px 12px",fontSize:"13px",border:"1px solid #e0e0e0",borderRadius:"6px",cursor:"pointer",outline:"none",background:"white"},onFocus:e=>{e.target.style.borderColor="#0058da"},onBlur:e=>{e.target.style.borderColor="#e0e0e0"},children:[(0,i.jsx)("option",{value:"all",children:"\ubaa8\ub4e0 \ub2e8\uacc4"}),(0,i.jsx)("option",{value:"basic_plan",children:"\uae30\ucd08\uae30\ud68d\uc548"}),(0,i.jsx)("option",{value:"story_board",children:"\uc2a4\ud1a0\ub9ac\ubcf4\ub4dc"}),(0,i.jsx)("option",{value:"filming",children:"\ucd2c\uc601"}),(0,i.jsx)("option",{value:"video_edit",children:"\ud3b8\uc9d1"}),(0,i.jsx)("option",{value:"post_work",children:"\ud6c4\ubc18\uc791\uc5c5"}),(0,i.jsx)("option",{value:"video_preview",children:"\uc2dc\uc0ac"}),(0,i.jsx)("option",{value:"confirmation",children:"\ucee8\ud38c"}),(0,i.jsx)("option",{value:"video_delivery",children:"\ub0a9\ud488"})]})]})]})}),(0,i.jsxs)("div",{className:"content calendar ".concat(q?"collapsed":""),children:[(0,i.jsxs)("div",{className:"filter flex space_between align_center",children:[(0,i.jsx)(r.A,{totalDate:W,year:P,month:z,setMonth:L,setYear:I,week_index:R,set_week_index:F,type:k,changeDate:$,day:D,setDay:O}),(0,i.jsx)("div",{className:"type",children:(0,i.jsxs)(A,{wrap:!0,children:[(0,i.jsxs)(x.A,{popupClassName:"a",className:"b",style:{width:140},defaultValue:"\uc804\uccb4",onChange:C,children:[(0,i.jsx)(w,{value:"\uc804\uccb4",children:"\uc804\uccb4"}),n.map((e,t)=>(0,i.jsx)(w,{value:e.name,children:e.name},t))]}),(0,i.jsx)(x.A,{defaultValue:_[0],style:{width:140},value:k,onChange:e=>{const t=_.indexOf(e);$(_[t]),N(_[t])},options:_.map(e=>({label:e,value:e}))})]})})]}),!q&&("month"===U?W&&(0,i.jsx)(l.A,{totalDate:W,month:z,year:P,week_index:R,type:k,day:D,project_list:v.filter(e=>{const t=e.name.toLowerCase().includes(X.toLowerCase()),n="all"===G||e[G]&&e[G].start_date;return t&&n}),user_memos:j,refetch:S}):(0,i.jsx)(p.A,{projects:v,phases:["basic_plan","story_board","filming","video_edit","post_work","video_preview","confirmation","video_delivery"],onPhaseUpdate:K,onMemoAdd:(e,t)=>{(0,E.WR)({date:e,memo:t},"user").then(()=>{S()}).catch(e=>{console.error("Failed to add memo:",e)})},isAdmin:"admin"===y||"calendar"===y,initialViewMode:U,initialSearchTerm:X,initialSelectedPhase:G})),(0,i.jsx)("div",{className:"list_mark",children:(0,i.jsx)("ul",{children:Q.map((e,t)=>(0,i.jsxs)("li",{children:[(0,i.jsx)("span",{style:{background:e.color}}),e.name]},t))})}),(0,i.jsx)(c,{project_list:n,this_month_project:g,next_month_project:f}),"month"===U?(0,i.jsx)(u.A,{projects:[...n],onPhaseUpdate:K}):(0,i.jsx)(d.A,{project_list:[...n]})]})]})]})})}}}]);